// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                   String    @id @default(cuid())
  userName             String    @unique
  email                String    @unique
  password             String
  image                String?
  isEmailVerified      Boolean   @default(false)
  submittedApplication Boolean   @default(false)
  isActivated          Boolean   @default(false)
  accType              AccType   @default(Admin)
  school               School?   @relation(references: [id], fields: [schoolId])
  schoolId             String?
  classes              Classes[]
  children             Student[]
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @default(now())
}

model School {
  id         String     @id @default(cuid())
  schoolName String
  state      String
  city       String
  phone      String
  type       SchoolType
  users      User[]
}

model Classes {
  id         String       @id @default(cuid())
  name       String
  teacher    User?        @relation(references: [id], fields: [teacherId])
  teacherId  String?
  enrollment Enrollment[]
}

model Student {
  id          String       @id @default(cuid())
  parent      User?        @relation(references: [id], fields: [parentId])
  parentId    String
  parentEmail String
  firstName   String
  lastName    String
  age         Int
  grade       String
  enrollment  Enrollment[]
}

model Enrollment {
  id        String   @id @default(cuid())
  student   Student? @relation(references: [id], fields: [studentId])
  studentId String
  class     Classes? @relation(references: [id], fields: [classId])
  classId   String
}

model VECPJWT {
  id        String   @id @default(cuid())
  userName  String
  jwt       String
  createdAt DateTime @default(now())
}

enum AccType {
  Admin
  Teacher
  Parent
}

enum SchoolType {
  Islamic
  Masjid
  Other
}
